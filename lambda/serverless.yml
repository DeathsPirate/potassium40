service: potassium40_package

plugins:
- serverless-python-requirements

versionFunctions: false

custom:
  pythonRequirements:
    dockerizePip: non-linux

package:
  exclude:
    - venv/**
    - node_modules/**
    - .gitignore
    - package.json
    - package-lock.json
    - test_data/**
    - package/**
    - deploy/**
    - deploy.py
    - undeploy.py
    - package.sh
    - layers/**

provider:
  name: aws
  runtime: python3.6
  stage: prod
  region: ap-southeast-1
  memorySize: 128
  timeout: 120
  logRetentionInDays: 1


functions:
  potassium40_get_robots:
    handler: lambda_multiproc.get_robots
    memorySize: 1280
    timeout: 180
    description: Use Lambda functions to get robots.txt file from Cisco Umbrella 1 million
  potassium40_compress_bucket:
    handler: compress_bucket.compress_bucket
    memorySize: 3008
    timeout: 900
    description: Compress all files in S3 bucket into 1 single zip file
